# ========================================
# CONECTA - Multi-Tenant Platform
# Environment Variables Template
# ========================================

# ----------------------------------------
# Control Plane Database (Supabase)
# ----------------------------------------
# Control plane PostgreSQL database for cities, platform_users, global config
# Format: postgresql://[user]:[password]@[host]:[port]/[database]
# Example: postgresql://postgres:password@db.xxxx.supabase.co:5432/postgres
CONTROL_DB_URL=

# ----------------------------------------
# Data Plane Database (Neon - Per City)
# ----------------------------------------
# Data plane PostgreSQL database for city-specific data
# Format: postgresql://[user]:[password]@[host]/[database]?sslmode=require
# Example: postgresql://user:pass@ep-xxxx.us-east-2.aws.neon.tech/neondb?sslmode=require
DATABASE_URL=

# ----------------------------------------
# Supabase Configuration (Production Server)
# ----------------------------------------
# Control Plane Supabase (for cities table, platform_users, etc.)
# Get these from your Supabase project dashboard: https://supabase.com/dashboard
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here

# For Afogados da Ingazeira project (example):
# SUPABASE_URL=https://hqhjbelcouanvcrqudbj.supabase.co
# SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# NOTE: Frontend client (src/integrations/supabase/client.ts) has these hardcoded
# which is acceptable for public anon keys in browser applications

# ----------------------------------------
# Supabase Edge Functions (Backend)
# ----------------------------------------
# These are configured in Supabase Dashboard > Edge Functions > Secrets
# NOT needed in Replit environment variables
# - SUPABASE_URL
# - SUPABASE_SERVICE_ROLE_KEY
# - OPENAI_API_KEY (for voice features)
# - PORTAL_TRANSPARENCIA_API_KEY (optional)

# ----------------------------------------
# Server Configuration (Optional)
# ----------------------------------------
# Host and port for development server (defaults applied if not set)
# HOST=0.0.0.0
# PORT=5000

# ----------------------------------------
# Migration Tools
# ----------------------------------------
# Required for CLI migration commands (provision-city, enable-module, etc.)
# Uses DATABASE_URL and CONTROL_DB_URL defined above

# ========================================
# DEPLOYMENT NOTES
# ========================================
#
# Development (Replit):
#   - Set DATABASE_URL and CONTROL_DB_URL in Replit Secrets
#   - Frontend Supabase: hardcoded credentials
#   - Backend Edge Functions: configure in Supabase Dashboard
#
# Production (Autoscale Deploy):
#   - Required: DATABASE_URL, CONTROL_DB_URL
#   - Optional: HOST, PORT (if overriding defaults)
#   - Supabase Edge Functions: must be configured in Supabase Dashboard
#
# Testing Connections:
#   npm run migrate:test-connections
#
# ========================================
