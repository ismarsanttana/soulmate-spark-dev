1. Vis√£o geral do projeto

Hoje:

O Conecta Afogados √© um portal espec√≠fico para uma √∫nica cidade (Afogados da Ingazeira).

Frontend em React + Vite.

Conectado diretamente ao Supabase (Postgres + Auth).

Cores e logo est√£o ‚Äúfixos‚Äù no c√≥digo do frontend.

Mas a minha vis√£o n√£o √© ficar s√≥ em Afogados.
Eu quero transformar esse projeto em uma plataforma multi-tenant, onde:

v√°rias cidades usam a mesma base de c√≥digo (frontend e backend),

cada cidade tem:

sua pr√≥pria logo,

seu tema de cores,

suas configura√ß√µes,

e, no futuro, um banco de dados separado.

Ou seja: o Conecta Afogados deve virar algo como um ‚ÄúConecta Cidades / UrbanByte App‚Äù, e Afogados da Ingazeira √© apenas o primeiro cliente (primeira cidade).

2. Respondendo √†s tuas perguntas diretamente
2.1. ‚ÄúVoc√™ quer transformar o Conecta Afogados em uma plataforma multi-tenant?‚Äù

‚úÖ Sim. Essa √© exatamente a ideia.

O Conecta Afogados √© hoje o MVP da primeira cidade.

A vis√£o √© que outras prefeituras possam usar a mesma plataforma:

com sua marca,

seus m√≥dulos habilitados (Educa√ß√£o, Sa√∫de, Obras, etc.),

seus dados totalmente separados das demais.

Ent√£o, sim: multi-tenant, mas com uma pegada forte de white-label para prefeituras.

2.2. ‚ÄúVoc√™ quer criar um novo projeto separado com backend Go, ou integrar dentro do projeto React atual?‚Äù

üëâ Quero criar um backend em Go separado, como um servi√ßo da plataforma.

Mais claro:

O projeto React atual continua existindo como frontend da cidade (Conecta Afogados √© o primeiro tenant).

O backend em Go ser√° um novo servi√ßo, que vai funcionar como:

‚ÄúControl Plane‚Äù da plataforma ‚Üí gerenciamento de cidades, temas, m√≥dulos, etc.

API multi-tenant ‚Üí o frontend n√£o fala mais direto com o banco pra algumas coisas (como tema), e sim com essa API.

Ent√£o, o fluxo ideal √©:

Frontend React (Conecta Afogados e futuramente outras cidades)
‚ü∂ chama API em Go para:

saber o tema da cidade (logo + cores),

mais tarde: buscar dados que venham do banco da cidade (Neon).

API Go (novo projeto)
‚ü∂ fala com:

um banco de controle (Supabase/Postgres) com a tabela cities,

e, no futuro, com os bancos individuais de cada cidade (Neon).

A ideia n√£o √© ‚Äúenfiar Go dentro do projeto React‚Äù, e sim ter:

um frontend (React/Vite),

um backend separado em Go, consumido via HTTP.

2.3. ‚ÄúO objetivo √© permitir white-label (logo/cores) ou tamb√©m bancos separados por cidade?‚Äù

‚úÖ Os dois. Mas em fases.

Fase 1 ‚Äì White-label + Control Plane simples (o que eu quero fazer agora)

Criar um backend em Go que:

usa uma tabela cities no Supabase com:

name, slug, logo_url, primary_color, secondary_color, accent_color, db_url, is_active etc.

exp√µe um endpoint:
GET /api/cities/{slug}/theme

esse endpoint retorna:

name, slug, logoUrl, primaryColor, SecondaryColor, accentColor.

O frontend React:

em vez de ter a logo/cores fixas no c√≥digo,

chama essa API passando o slug da cidade (por enquanto afogados-da-ingazeira),

e monta a tela de login e o app com as cores e logo que vierem do backend.

‚û°Ô∏è Isso j√° me permite:

ter Afogados hoje,

amanh√£ cadastrar ‚ÄúCidade B‚Äù na tabela cities,

mudar logo/cores sem mexer no c√≥digo do frontend,

preparar o terreno pra ser realmente multi-tenant.

Fase 2 ‚Äì Bancos de dados separados por cidade (Neon)

Cada cidade ter√° seu pr√≥prio banco no Neon:

urbanbyte_afogados,

urbanbyte_outra_cidade, etc.

A mesma tabela cities no Supabase vai guardar o db_url de cada cidade.

O backend em Go:

usa o slug da cidade pra buscar os dados da cidade (no Supabase),

l√™ o db_url,

e abre uma conex√£o com o banco Neon daquela cidade para ler/gravar dados.

Essa parte √© mais sens√≠vel (migra√ß√£o, conex√µes, etc.), ent√£o quero fazer depois, com calma, quando o esqueleto do backend estiver pronto.

3. O que eu preciso que voc√™ fa√ßa AGORA

Neste primeiro momento, eu quero apenas esse passo inicial funcionando:

Backend em Go:

Usando a env CONTROL_DB_URL pra conectar no banco Supabase (onde j√° criei a tabela public.cities).

Com um endpoint:

GET /api/cities/{slug}/theme

que faz SELECT em public.cities e retorna name, slug, logoUrl, primaryColor, secondaryColor, accentColor.

Com um endpoint simples de health:

GET /healthz ‚Üí "ok".

Frontend React:

Na p√°gina de login (Auth), eu quero:

pegar um slug fixo por enquanto (afogados-da-ingazeira),

chamar a API GET /api/cities/afogados-da-ingazeira/theme,

aplicar logoUrl e as cores retornadas no layout da tela de login.

Mais pra frente, com isso est√°vel, eu parto pra:

extrair o slug do subdom√≠nio dinamicamente,

implementar a parte de Neon (bancos separados por cidade),

migrar gradualmente as funcionalidades que hoje falam direto com o Supabase.

4. Resumindo em uma frase

Sim, eu quero transformar o Conecta Afogados numa plataforma multi-tenant, com um backend em Go separado, come√ßando por um Control Plane simples (tabela cities no Supabase + endpoint de tema), e depois evoluindo para bancos separados por cidade no Neon.